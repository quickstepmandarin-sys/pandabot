<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ¼ PandaBot (Puter.js Free)</title>
<style>
  body {
    font-family: 'Comic Sans MS', sans-serif;
    text-align: center;
    padding: 40px;
    background: linear-gradient(to bottom, #fff9e6, #ffe08c);
  }
  h1 { font-size: 2.5em; color: #2a9d8f; margin-bottom: 10px; }
  #chat {
    margin-top: 30px;
    font-size: 18px;
    min-height: 200px;
    background: #fff;
    padding: 20px;
    border-radius: 20px;
    width: 90%;
    max-width: 600px;
    margin: 0 auto;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    overflow-y: auto;
    max-height: 400px;
    text-align: left;
  }
  input, button {
    font-size: 18px;
    padding: 12px 16px;
    border-radius: 12px;
    border: none;
    margin-top: 10px;
  }
  button {
    background-color: #f4a261;
    color: white;
    cursor: pointer;
    box-shadow: 0 5px 10px rgba(0,0,0,0.2);
  }
  button:hover { background-color: #e76f51; }
  input { width: 70%; }
  .user { font-weight: bold; color: #264653; margin-bottom: 5px; }
  .bot { font-weight: bold; color: #2a9d8f; margin-bottom: 5px; }
</style>
</head>
<body>
<h1>ğŸ¼ PandaBot (Puter.js Free)</h1>
<p>è¾“å…¥ä¸­æ–‡æˆ–è‹±æ–‡ï¼ŒPandaBot ä¼šå›ç­”ä½ ï¼</p>

<input id="msg" placeholder="è¯´ç‚¹ä»€ä¹ˆ..." />
<button onclick="sendMsg()">å‘é€</button>
<div id="chat"></div>

<!-- Puter.js Free -->
<script src="https://js.puter.com/v2/puter.js"></script>
<script>
async function sendMsg() {
  const input = document.getElementById("msg");
  const chat = document.getElementById("chat");
  const text = input.value.trim();
  if (!text) return;

  chat.innerHTML += `<div class="user">ä½ : ${text}</div>`;
  chat.scrollTop = chat.scrollHeight;
  input.value = "";

  // Show temporary loading
  const loadingId = `loading-${Date.now()}`;
  chat.innerHTML += `<div id="${loadingId}" class="bot">PandaBot æ­£åœ¨æ€è€ƒ...</div>`;
  chat.scrollTop = chat.scrollHeight;

  try {
    // Puter.js API call
    const res = await puter.ai.chat({
      model: "deepseek-chat",
      messages: [{ role: "user", content: text }],
      temperature: 0.7,
      max_tokens: 500
    });

    const reply = res?.choices?.[0]?.message?.content || res?.message || "PandaBot æ²¡æœ‰å›å¤";
    document.getElementById(loadingId).innerHTML = `ğŸ¼ PandaBot: ${reply}`;

    // Speak reply
    const utter = new SpeechSynthesisUtterance(reply);
    utter.lang = 'zh-CN';
    speechSynthesis.speak(utter);

  } catch (err) {
    document.getElementById(loadingId).innerHTML = `ğŸ¼ PandaBot: é”™è¯¯ - ${err}`;
    console.error(err);
  }

  chat.scrollTop = chat.scrollHeight;
}
</script>
</body>
</html>
